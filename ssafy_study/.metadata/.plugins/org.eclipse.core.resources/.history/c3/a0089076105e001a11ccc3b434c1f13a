package study0301;

import java.util.PriorityQueue;
import java.util.Scanner;

public class Solution_모의_2382_미생물격리 {

	static int N, M, K;
	static long ans;
	static int[] dy = { -1, 1, 0, 0 };
	static int[] dx = { 0, 0, -1, 1 };
	static PriorityQueue<Bug> pq = new PriorityQueue<>();

	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		int T = sc.nextInt();
		for (int t = 1; t <= T; t++) {
			N = sc.nextInt();
			M = sc.nextInt();
			K = sc.nextInt();
			for (int i = 0; i < K; i++) {
				pq.add(new Bug(sc.nextInt(), sc.nextInt(), sc.nextInt(), sc.nextInt()));
			}
			while(!pq.isEmpty())
				System.out.println(pq.poll());
//			for (int i = 0; i < M; i++) {
//				move();
//				System.out.println(pq.toString());
//			}
//			while (!pq.isEmpty()) {
//				ans += pq.poll().c;
//			}
//			System.out.println("#" + t + " " + ans);
		}
	}

	static void move() {
		PriorityQueue<Bug> same = new PriorityQueue<>();
		int prevy = -1;
		int prevx = -1;
		int size = pq.size();
		for (int s = 0; s < size; s++) {
			Bug cur = pq.poll();
			if (cur.y == prevy && cur.x == prevx) {
				same.add(cur);
			} else {
				if (!same.isEmpty()) {
					int y = 0, x = 0, d = 0;
					long cnt = 0;
					while (!same.isEmpty()) {
						Bug b = same.poll();
						y = b.y;
						x = b.x;
						d = b.d;
						cnt += b.c;
					}
					pq.add(new Bug(y, x, cnt, d));
				}
				int y = cur.y + dy[cur.d];
				int x = cur.x + dx[cur.d];
				if (y == 0 || x == 0 || y == N - 1 || x == N - 1)
					pq.add(new Bug(y, x, cur.c / 2, reverse(cur.d)));
				else
					pq.add(new Bug(y, x, cur.c, cur.d));
				prevy = cur.y;
				prevx = cur.x;

			}
		}
	}

	static int reverse(int d) {
		if (d == 1)
			return 2;
		else if (d == 2)
			return 1;
		else if (d == 3)
			return 4;
		else
			return 3;
	}

	static class Bug implements Comparable<Bug> {
		int y, x, d;
		long c;

		public Bug(int y, int x, long c, int d) {
			super();
			this.y = y;
			this.x = x;
			this.c = c;
			this.d = d;
		}

		@Override
		public String toString() {
			return "Bug [y=" + y + ", x=" + x + ", d=" + d + ", c=" + c + "]";
		}

		@Override
		public int compareTo(Bug o) {
			if (this.y > o.y)
				return 1;
			else if (this.y < o.y)
				return -1;
			else {
				if (this.x > o.x)
					return 1;
				else if (this.x < o.x)
					return -1;
				else {
					if (this.c > o.c)
						return 1;
					else if (this.c < o.c)
						return -1;
					else
						return 0;
				}
			}
		}

	}

}
