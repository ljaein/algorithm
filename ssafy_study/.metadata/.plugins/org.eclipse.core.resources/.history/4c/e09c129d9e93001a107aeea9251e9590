package study0502;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.LinkedList;
import java.util.Queue;
import java.util.StringTokenizer;

public class Main_2931_가스관 {

	static int R, C, sy, sx;
	static char[][] map;
	static int[][] visit;
	static int[] dy = { -1, 0, 1, 0 }; // 상 우 하 좌
	static int[] dx = { 0, 1, 0, -1 };
	static char[] guan = {'|','-','+','1','2','3','4'};
	public static void main(String[] args) throws IOException {
		BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
		StringTokenizer st = new StringTokenizer(br.readLine());
		R = Integer.parseInt(st.nextToken());
		C = Integer.parseInt(st.nextToken());
		map = new char[R][C];
		visit = new int[R][C];
		for (int i = 0; i < R; i++) {
			map[i] = br.readLine().toCharArray();
			for (int j = 0; j < C; j++) {
				if (map[i][j] == 'M') {
					sy = i;
					sx = j;
				} else if (map[i][j] == '+') {
					visit[i][j] = -1;
				}
			}
		}
		for (int d = 0; d < 4; d++) {
			int ny = sy + dy[d];
			int nx = sx + dx[d];
			if (safe(ny, nx) && map[ny][nx] != '.') {
				dfs(ny, nx, d, ' ');
			}
		}
	}

	static boolean safe(int y, int x) {
		if (y < 0 || x < 0 || y >= R || x >= C)
			return false;
		return true;
	}

	static void dfs(int y, int x, int d, char c) {
		if(map[y][x]=='Z'){
			System.out.println(c);
			return;
		}else if(map[y][x]=='.'){
			System.out.println(y+" "+x);
			for(int i=0;i<7;i++){
				map[y][x] = guan[i];
				if (map[y][x] == '|' || map[y][x] == '-' || map[y][x] == '+') {
					int ny = y + dy[d];
					int nx = x + dx[d];
					dfs(ny, nx, d ,c);
				} else if (map[y][x] == '1') {
					int nd = d == 3 ? 2 : 1;
					dfs(y + dy[nd], x + dx[nd], nd,guan[i]);
				} else if (map[y][x] == '2') {
					int nd = d == 2 ? 1 : 0;
					dfs(y + dy[nd], x + dx[nd], nd,guan[i]);
				} else if (map[y][x] == '3') {
					int nd = d == 1 ? 0 : 3;
					dfs(y + dy[nd], x + dx[nd], nd,guan[i]);
				} else if (map[y][x] == '4') {
					int nd = d == 1 ? 2 : 3;
					dfs(y + dy[nd], x + dx[nd], nd,guan[i]);
				}
			}
		}else if (map[y][x] == '|' || map[y][x] == '-' || map[y][x] == '+') {
			int ny = y + dy[d];
			int nx = x + dx[d];
			dfs(ny, nx, d ,c);
		} else if (map[y][x] == '1') {
			int nd = d == 3 ? 2 : 1;
			dfs(y + dy[nd], x + dx[nd], nd,c);
		} else if (map[y][x] == '2') {
			int nd = d == 2 ? 1 : 0;
			dfs(y + dy[nd], x + dx[nd], nd,c);
		} else if (map[y][x] == '3') {
			int nd = d == 1 ? 0 : 3;
			dfs(y + dy[nd], x + dx[nd], nd,c);
		} else if (map[y][x] == '4') {
			int nd = d == 1 ? 2 : 3;
			dfs(y + dy[nd], x + dx[nd], nd,c);
		}
	}

	static void check(int y, int x, int d){
		
	}
	
	static class Point {
		int y, x, d;

		public Point(int y, int x, int d) {
			super();
			this.y = y;
			this.x = x;
			this.d = d;
		}

	}
}
