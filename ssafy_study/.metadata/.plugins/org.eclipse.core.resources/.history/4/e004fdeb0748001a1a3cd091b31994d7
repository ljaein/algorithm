package study.hw;

import java.util.Arrays;
import java.util.Scanner;

public class Main_1260_DFS와BFS {

	static int N, M, V, idx;
	static int[][] map;
	static boolean[][] visited;
	static int[] res;

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		Scanner sc = new Scanner(System.in);
		N = sc.nextInt();
		M = sc.nextInt();
		V = sc.nextInt();//시작정점
		map = new int[N+1][N+1];
		visited = new boolean[N+1][N+1];
		res = new int[N];
		for(int i=0;i<M;i++){
			int x = sc.nextInt();
			int y = sc.nextInt();
			map[x][y]=1;
			map[y][x]=1;
		}
		DFS(V);
		System.out.println(Arrays.toString(res));
		
	}
	
	public static void DFS(int v){
		for(int i=1;i<N+1;i++){
			if(map[v][i]==1 && !visited[v][i]){
				visited[v][i] = true;
				visited[i][v] = true;
				res[idx++] = i;
				DFS(i);
			}
		}
	}

}
